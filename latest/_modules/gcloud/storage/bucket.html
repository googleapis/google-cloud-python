<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>gcloud.storage.bucket &mdash; gcloud dc26221 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/normalize.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     'dc26221',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/js/vendor/modernizr-2.6.2.min.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="gcloud dc26221 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body role="document">
    <header class="page-header fixed" role="banner">
      <h1 class="logo">
        <a href="index.html" title="back to home">
          <img src="../../../_static/images/logo.svg" alt="Google Cloud Platform" />
          <span class="gcloud">gcloud</span>
        </a>
      </h1>
      <nav class="main-nav">
        <div class="nav-current">Python</div>
        <ul class="menu">
          <li>
            <a href="
https://googlecloudplatform.github.io/gcloud-java/" title="gcloud-java page">
              <img src="../../../_static/images/icon-lang-java-duke.svg" alt="Duke icon" class="menu-icon" />
              Java
            </a>
          </li>
          <li>
            <a href="
https://googlecloudplatform.github.io/gcloud-node/#/docs" title="Node.js docs page">
              <img src="../../../_static/images/icon-lang-nodejs.svg" alt="Node.js icon" class="menu-icon" />
              Node.js
            </a>
          </li>
          <li>
            <a href="#" title="Python docs page">
              <img src="../../../_static/images/icon-lang-python.svg" alt="Python icon" class="menu-icon" />
              Python
            </a>
          </li>
          <li>
            <a href="
http://googlecloudplatform.github.io/gcloud-ruby/docs/latest" title="Ruby docs page">
              <img src="../../../_static/images/icon-lang-ruby.svg" alt="Ruby icon" class="menu-icon" />
              Ruby
            </a>
          </li>
        </ul>
      </nav><!-- end of .main-nav -->
      <a href="https://github.com/GoogleCloudPlatform/gcloud-python/issues/new?title=%5BDocumentation+Issue%5D+&body=Page+Name%3A+_modules/gcloud/storage/bucket%0ARelease%3A%20dc26221" target="_blank" class="v-btn" id="file-issue">
        <img src="_static/images/icon-link-github.svg" />
        Report an Issue
      </a>
    </header><!-- end of .page-header -->
    
      <article class="main lang-page" role="main">

      <header class="docs-header">
          <div class="versions">
            <a href="/gcloud-python/versions.html" class="v-btn">
              <img src="_static/images/icon-arrow-bullet.svg" />
              Version History (dc26221)
            </a>
          </div><!-- end of .versions -->
          <div>
            <a href="https://github.com/GoogleCloudPlatform/gcloud-python/issues/new?title=%5BDocumentation+Issue%5D+" target="_blank" class="v-btn" id="file-issue-secondary">
              <img src="_static/images/icon-link-github.svg" />
              Report an Issue
            </a>
          </div>
      </header>

      <section class="content">
        
  <h1>Source code for gcloud.storage.bucket</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright 2014 Google Inc. All rights reserved.</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#     http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>

<span class="sd">&quot;&quot;&quot;Create / interact with gcloud storage buckets.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">copy</span>

<span class="kn">import</span> <span class="nn">six</span>

<span class="kn">from</span> <span class="nn">gcloud._helpers</span> <span class="kn">import</span> <span class="n">_rfc3339_to_datetime</span>
<span class="kn">from</span> <span class="nn">gcloud.exceptions</span> <span class="kn">import</span> <span class="n">NotFound</span>
<span class="kn">from</span> <span class="nn">gcloud.iterator</span> <span class="kn">import</span> <span class="n">Iterator</span>
<span class="kn">from</span> <span class="nn">gcloud.storage._helpers</span> <span class="kn">import</span> <span class="n">_PropertyMixin</span>
<span class="kn">from</span> <span class="nn">gcloud.storage._helpers</span> <span class="kn">import</span> <span class="n">_scalar_property</span>
<span class="kn">from</span> <span class="nn">gcloud.storage.acl</span> <span class="kn">import</span> <span class="n">BucketACL</span>
<span class="kn">from</span> <span class="nn">gcloud.storage.acl</span> <span class="kn">import</span> <span class="n">DefaultObjectACL</span>
<span class="kn">from</span> <span class="nn">gcloud.storage.blob</span> <span class="kn">import</span> <span class="n">Blob</span>


<span class="k">class</span> <span class="nc">_BlobIterator</span><span class="p">(</span><span class="n">Iterator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An iterator listing blobs in a bucket</span>

<span class="sd">    You shouldn&#39;t have to use this directly, but instead should use the</span>
<span class="sd">    :class:`gcloud.storage.blob.Bucket.list_blobs` method.</span>

<span class="sd">    :type bucket: :class:`gcloud.storage.bucket.Bucket`</span>
<span class="sd">    :param bucket: The bucket from which to list blobs.</span>

<span class="sd">    :type extra_params: dict or None</span>
<span class="sd">    :param extra_params: Extra query string parameters for the API call.</span>

<span class="sd">    :type client: :class:`gcloud.storage.client.Client`</span>
<span class="sd">    :param client: Optional. The client to use for making connections.</span>
<span class="sd">                   Defaults to the bucket&#39;s client.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bucket</span><span class="p">,</span> <span class="n">extra_params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">client</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">client</span> <span class="o">=</span> <span class="n">bucket</span><span class="o">.</span><span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bucket</span> <span class="o">=</span> <span class="n">bucket</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_prefixes</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">_BlobIterator</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span>
            <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">bucket</span><span class="o">.</span><span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;/o&#39;</span><span class="p">,</span>
            <span class="n">extra_params</span><span class="o">=</span><span class="n">extra_params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_items_from_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Yield :class:`.storage.blob.Blob` items from response.</span>

<span class="sd">        :type response: dict</span>
<span class="sd">        :param response: The JSON API response for a page of blobs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_prefixes</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;prefixes&#39;</span><span class="p">,</span> <span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_current_prefixes</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;items&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
            <span class="n">blob</span> <span class="o">=</span> <span class="n">Blob</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bucket</span><span class="p">)</span>
            <span class="n">blob</span><span class="o">.</span><span class="n">_set_properties</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">blob</span>


<div class="viewcode-block" id="Bucket"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket">[docs]</a><span class="k">class</span> <span class="nc">Bucket</span><span class="p">(</span><span class="n">_PropertyMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A class representing a Bucket on Cloud Storage.</span>

<span class="sd">    :type client: :class:`gcloud.storage.client.Client`</span>
<span class="sd">    :param client: A client which holds credentials and project configuration</span>
<span class="sd">                   for the bucket (which requires a project).</span>

<span class="sd">    :type name: string</span>
<span class="sd">    :param name: The name of the bucket.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_iterator_class</span> <span class="o">=</span> <span class="n">_BlobIterator</span>

    <span class="n">_MAX_OBJECTS_FOR_ITERATION</span> <span class="o">=</span> <span class="mi">256</span>
    <span class="sd">&quot;&quot;&quot;Maximum number of existing objects allowed in iteration.</span>

<span class="sd">    This is used in Bucket.delete() and Bucket.make_public().</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_STORAGE_CLASSES</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;STANDARD&#39;</span><span class="p">,</span> <span class="s1">&#39;NEARLINE&#39;</span><span class="p">,</span> <span class="s1">&#39;DURABLE_REDUCED_AVAILABILITY&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Bucket</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_acl</span> <span class="o">=</span> <span class="n">BucketACL</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_default_object_acl</span> <span class="o">=</span> <span class="n">DefaultObjectACL</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;&lt;Bucket: </span><span class="si">%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">client</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The client bound to this bucket.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span>

<div class="viewcode-block" id="Bucket.blob"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.blob">[docs]</a>    <span class="k">def</span> <span class="nf">blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Factory constructor for blob object.</span>

<span class="sd">        .. note::</span>
<span class="sd">          This will not make an HTTP request; it simply instantiates</span>
<span class="sd">          a blob object owned by this bucket.</span>

<span class="sd">        :type blob_name: string</span>
<span class="sd">        :param blob_name: The name of the blob to be instantiated.</span>

<span class="sd">        :type chunk_size: integer</span>
<span class="sd">        :param chunk_size: The size of a chunk of data whenever iterating</span>
<span class="sd">                           (1 MB). This must be a multiple of 256 KB per the</span>
<span class="sd">                           API specification.</span>

<span class="sd">        :rtype: :class:`gcloud.storage.blob.Blob`</span>
<span class="sd">        :returns: The blob object created.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Blob</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">blob_name</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="n">chunk_size</span><span class="p">)</span></div>

<div class="viewcode-block" id="Bucket.exists"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.exists">[docs]</a>    <span class="k">def</span> <span class="nf">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Determines whether or not this bucket exists.</span>

<span class="sd">        :type client: :class:`gcloud.storage.client.Client` or ``NoneType``</span>
<span class="sd">        :param client: Optional. The client to use.  If not passed, falls back</span>
<span class="sd">                       to the ``client`` stored on the current bucket.</span>

<span class="sd">        :rtype: boolean</span>
<span class="sd">        :returns: True if the bucket exists in Cloud Storage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_require_client</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># We only need the status code (200 or not) so we seek to</span>
            <span class="c1"># minimize the returned payload.</span>
            <span class="n">query_params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="s1">&#39;name&#39;</span><span class="p">}</span>
            <span class="c1"># We intentionally pass `_target_object=None` since fields=name</span>
            <span class="c1"># would limit the local properties.</span>
            <span class="n">client</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">api_request</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
                                          <span class="n">query_params</span><span class="o">=</span><span class="n">query_params</span><span class="p">,</span>
                                          <span class="n">_target_object</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
            <span class="c1"># NOTE: This will not fail immediately in a batch. However, when</span>
            <span class="c1">#       Batch.finish() is called, the resulting `NotFound` will be</span>
            <span class="c1">#       raised.</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">except</span> <span class="n">NotFound</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span></div>

<div class="viewcode-block" id="Bucket.create"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.create">[docs]</a>    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates current bucket.</span>

<span class="sd">        If the bucket already exists, will raise</span>
<span class="sd">        :class:`gcloud.exceptions.Conflict`.</span>

<span class="sd">        This implements &quot;storage.buckets.insert&quot;.</span>

<span class="sd">        :type client: :class:`gcloud.storage.client.Client` or ``NoneType``</span>
<span class="sd">        :param client: Optional. The client to use.  If not passed, falls back</span>
<span class="sd">                       to the ``client`` stored on the current bucket.</span>

<span class="sd">        :rtype: :class:`gcloud.storage.bucket.Bucket`</span>
<span class="sd">        :returns: The newly created bucket.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_require_client</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
        <span class="n">query_params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;project&#39;</span><span class="p">:</span> <span class="n">client</span><span class="o">.</span><span class="n">project</span><span class="p">}</span>
        <span class="n">api_response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">api_request</span><span class="p">(</span>
            <span class="n">method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;/b&#39;</span><span class="p">,</span> <span class="n">query_params</span><span class="o">=</span><span class="n">query_params</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">},</span> <span class="n">_target_object</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_properties</span><span class="p">(</span><span class="n">api_response</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">acl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create our ACL on demand.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acl</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_object_acl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create our defaultObjectACL on demand.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default_object_acl</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="Bucket.path_helper"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.path_helper">[docs]</a>    <span class="k">def</span> <span class="nf">path_helper</span><span class="p">(</span><span class="n">bucket_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Relative URL path for a bucket.</span>

<span class="sd">        :type bucket_name: string</span>
<span class="sd">        :param bucket_name: The bucket name in the path.</span>

<span class="sd">        :rtype: string</span>
<span class="sd">        :returns: The relative URL path for ``bucket_name``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;/b/&#39;</span> <span class="o">+</span> <span class="n">bucket_name</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The URL path to this bucket.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Cannot determine path without bucket name.&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">path_helper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<div class="viewcode-block" id="Bucket.get_blob"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.get_blob">[docs]</a>    <span class="k">def</span> <span class="nf">get_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a blob object by name.</span>

<span class="sd">        This will return None if the blob doesn&#39;t exist::</span>

<span class="sd">          &gt;&gt;&gt; from gcloud import storage</span>
<span class="sd">          &gt;&gt;&gt; client = storage.Client()</span>
<span class="sd">          &gt;&gt;&gt; bucket = client.get_bucket(&#39;my-bucket&#39;)</span>
<span class="sd">          &gt;&gt;&gt; print bucket.get_blob(&#39;/path/to/blob.txt&#39;)</span>
<span class="sd">          &lt;Blob: my-bucket, /path/to/blob.txt&gt;</span>
<span class="sd">          &gt;&gt;&gt; print bucket.get_blob(&#39;/does-not-exist.txt&#39;)</span>
<span class="sd">          None</span>

<span class="sd">        :type blob_name: string</span>
<span class="sd">        :param blob_name: The name of the blob to retrieve.</span>

<span class="sd">        :type client: :class:`gcloud.storage.client.Client` or ``NoneType``</span>
<span class="sd">        :param client: Optional. The client to use.  If not passed, falls back</span>
<span class="sd">                       to the ``client`` stored on the current bucket.</span>

<span class="sd">        :rtype: :class:`gcloud.storage.blob.Blob` or None</span>
<span class="sd">        :returns: The blob object if it exists, otherwise None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_require_client</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
        <span class="n">blob</span> <span class="o">=</span> <span class="n">Blob</span><span class="p">(</span><span class="n">bucket</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">blob_name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">api_request</span><span class="p">(</span>
                <span class="n">method</span><span class="o">=</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">blob</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">_target_object</span><span class="o">=</span><span class="n">blob</span><span class="p">)</span>
            <span class="c1"># NOTE: We assume response.get(&#39;name&#39;) matches `blob_name`.</span>
            <span class="n">blob</span><span class="o">.</span><span class="n">_set_properties</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="c1"># NOTE: This will not fail immediately in a batch. However, when</span>
            <span class="c1">#       Batch.finish() is called, the resulting `NotFound` will be</span>
            <span class="c1">#       raised.</span>
            <span class="k">return</span> <span class="n">blob</span>
        <span class="k">except</span> <span class="n">NotFound</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span></div>

<div class="viewcode-block" id="Bucket.list_blobs"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.list_blobs">[docs]</a>    <span class="k">def</span> <span class="nf">list_blobs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_results</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">page_token</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">delimiter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">versions</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;noAcl&#39;</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an iterator used to find blobs in the bucket.</span>

<span class="sd">        :type max_results: integer or ``NoneType``</span>
<span class="sd">        :param max_results: maximum number of blobs to return.</span>

<span class="sd">        :type page_token: string</span>
<span class="sd">        :param page_token: opaque marker for the next &quot;page&quot; of blobs. If not</span>
<span class="sd">                           passed, will return the first page of blobs.</span>

<span class="sd">        :type prefix: string or ``NoneType``</span>
<span class="sd">        :param prefix: optional prefix used to filter blobs.</span>

<span class="sd">        :type delimiter: string or ``NoneType``</span>
<span class="sd">        :param delimiter: optional delimter, used with ``prefix`` to</span>
<span class="sd">                          emulate hierarchy.</span>

<span class="sd">        :type versions: boolean or ``NoneType``</span>
<span class="sd">        :param versions: whether object versions should be returned as</span>
<span class="sd">                         separate blobs.</span>

<span class="sd">        :type projection: string or ``NoneType``</span>
<span class="sd">        :param projection: If used, must be &#39;full&#39; or &#39;noAcl&#39;. Defaults to</span>
<span class="sd">                           &#39;noAcl&#39;. Specifies the set of properties to return.</span>

<span class="sd">        :type fields: string or ``NoneType``</span>
<span class="sd">        :param fields: Selector specifying which fields to include in a</span>
<span class="sd">                       partial response. Must be a list of fields. For example</span>
<span class="sd">                       to get a partial response with just the next page token</span>
<span class="sd">                       and the language of each blob returned:</span>
<span class="sd">                       &#39;items/contentLanguage,nextPageToken&#39;</span>

<span class="sd">        :type client: :class:`gcloud.storage.client.Client` or ``NoneType``</span>
<span class="sd">        :param client: Optional. The client to use.  If not passed, falls back</span>
<span class="sd">                       to the ``client`` stored on the current bucket.</span>

<span class="sd">        :rtype: :class:`_BlobIterator`.</span>
<span class="sd">        :returns: An iterator of blobs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">extra_params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">max_results</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">extra_params</span><span class="p">[</span><span class="s1">&#39;maxResults&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_results</span>

        <span class="k">if</span> <span class="n">prefix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">extra_params</span><span class="p">[</span><span class="s1">&#39;prefix&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">prefix</span>

        <span class="k">if</span> <span class="n">delimiter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">extra_params</span><span class="p">[</span><span class="s1">&#39;delimiter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">delimiter</span>

        <span class="k">if</span> <span class="n">versions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">extra_params</span><span class="p">[</span><span class="s1">&#39;versions&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">versions</span>

        <span class="n">extra_params</span><span class="p">[</span><span class="s1">&#39;projection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">projection</span>

        <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">extra_params</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_iterator_class</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">extra_params</span><span class="o">=</span><span class="n">extra_params</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span>
        <span class="c1"># Page token must be handled specially since the base `Iterator`</span>
        <span class="c1"># class has it as a reserved property.</span>
        <span class="k">if</span> <span class="n">page_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">next_page_token</span> <span class="o">=</span> <span class="n">page_token</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="Bucket.delete"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete this bucket.</span>

<span class="sd">        The bucket **must** be empty in order to submit a delete request. If</span>
<span class="sd">        ``force=True`` is passed, this will first attempt to delete all the</span>
<span class="sd">        objects / blobs in the bucket (i.e. try to empty the bucket).</span>

<span class="sd">        If the bucket doesn&#39;t exist, this will raise</span>
<span class="sd">        :class:`gcloud.exceptions.NotFound`.  If the bucket is not empty</span>
<span class="sd">        (and ``force=False``), will raise :class:`gcloud.exceptions.Conflict`.</span>

<span class="sd">        If ``force=True`` and the bucket contains more than 256 objects / blobs</span>
<span class="sd">        this will cowardly refuse to delete the objects (or the bucket). This</span>
<span class="sd">        is to prevent accidental bucket deletion and to prevent extremely long</span>
<span class="sd">        runtime of this method.</span>

<span class="sd">        :type force: boolean</span>
<span class="sd">        :param force: If True, empties the bucket&#39;s objects then deletes it.</span>

<span class="sd">        :type client: :class:`gcloud.storage.client.Client` or ``NoneType``</span>
<span class="sd">        :param client: Optional. The client to use.  If not passed, falls back</span>
<span class="sd">                       to the ``client`` stored on the current bucket.</span>

<span class="sd">        :raises: :class:`ValueError` if ``force`` is ``True`` and the bucket</span>
<span class="sd">                 contains more than 256 objects / blobs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_require_client</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
            <span class="n">blobs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_blobs</span><span class="p">(</span>
                <span class="n">max_results</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_MAX_OBJECTS_FOR_ITERATION</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">blobs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MAX_OBJECTS_FOR_ITERATION</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s1">&#39;Refusing to delete bucket with more than &#39;</span>
                    <span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> objects. If you actually want to delete &#39;</span>
                    <span class="s1">&#39;this bucket, please delete the objects &#39;</span>
                    <span class="s1">&#39;yourself before calling Bucket.delete().&#39;</span>
                <span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_MAX_OBJECTS_FOR_ITERATION</span><span class="p">,)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

            <span class="c1"># Ignore 404 errors on delete.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">delete_blobs</span><span class="p">(</span><span class="n">blobs</span><span class="p">,</span> <span class="n">on_error</span><span class="o">=</span><span class="k">lambda</span> <span class="n">blob</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                              <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span>

        <span class="c1"># We intentionally pass `_target_object=None` since a DELETE</span>
        <span class="c1"># request has no response value (whether in a standard request or</span>
        <span class="c1"># in a batch request).</span>
        <span class="n">client</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">api_request</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;DELETE&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
                                      <span class="n">_target_object</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="Bucket.delete_blob"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.delete_blob">[docs]</a>    <span class="k">def</span> <span class="nf">delete_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Deletes a blob from the current bucket.</span>

<span class="sd">        If the blob isn&#39;t found (backend 404), raises a</span>
<span class="sd">        :class:`gcloud.exceptions.NotFound`.</span>

<span class="sd">        For example::</span>

<span class="sd">          &gt;&gt;&gt; from gcloud.exceptions import NotFound</span>
<span class="sd">          &gt;&gt;&gt; from gcloud import storage</span>
<span class="sd">          &gt;&gt;&gt; client = storage.Client()</span>
<span class="sd">          &gt;&gt;&gt; bucket = client.get_bucket(&#39;my-bucket&#39;)</span>
<span class="sd">          &gt;&gt;&gt; print bucket.list_blobs()</span>
<span class="sd">          [&lt;Blob: my-bucket, my-file.txt&gt;]</span>
<span class="sd">          &gt;&gt;&gt; bucket.delete_blob(&#39;my-file.txt&#39;)</span>
<span class="sd">          &gt;&gt;&gt; try:</span>
<span class="sd">          ...   bucket.delete_blob(&#39;doesnt-exist&#39;)</span>
<span class="sd">          ... except NotFound:</span>
<span class="sd">          ...   pass</span>

<span class="sd">        :type blob_name: string</span>
<span class="sd">        :param blob_name: A blob name to delete.</span>

<span class="sd">        :type client: :class:`gcloud.storage.client.Client` or ``NoneType``</span>
<span class="sd">        :param client: Optional. The client to use.  If not passed, falls back</span>
<span class="sd">                       to the ``client`` stored on the current bucket.</span>

<span class="sd">        :raises: :class:`gcloud.exceptions.NotFound` (to suppress</span>
<span class="sd">                 the exception, call ``delete_blobs``, passing a no-op</span>
<span class="sd">                 ``on_error`` callback, e.g.::</span>

<span class="sd">                 &gt;&gt;&gt; bucket.delete_blobs([blob], on_error=lambda blob: None)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_require_client</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
        <span class="n">blob_path</span> <span class="o">=</span> <span class="n">Blob</span><span class="o">.</span><span class="n">path_helper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">blob_name</span><span class="p">)</span>
        <span class="c1"># We intentionally pass `_target_object=None` since a DELETE</span>
        <span class="c1"># request has no response value (whether in a standard request or</span>
        <span class="c1"># in a batch request).</span>
        <span class="n">client</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">api_request</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;DELETE&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">blob_path</span><span class="p">,</span>
                                      <span class="n">_target_object</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="Bucket.delete_blobs"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.delete_blobs">[docs]</a>    <span class="k">def</span> <span class="nf">delete_blobs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blobs</span><span class="p">,</span> <span class="n">on_error</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Deletes a list of blobs from the current bucket.</span>

<span class="sd">        Uses :func:`Bucket.delete_blob` to delete each individual blob.</span>

<span class="sd">        :type blobs: list of string or :class:`gcloud.storage.blob.Blob`</span>
<span class="sd">        :param blobs: A list of blob names or Blob objects to delete.</span>

<span class="sd">        :type on_error: a callable taking (blob)</span>
<span class="sd">        :param on_error: If not ``None``, called once for each blob raising</span>
<span class="sd">                         :class:`gcloud.exceptions.NotFound`;</span>
<span class="sd">                         otherwise, the exception is propagated.</span>

<span class="sd">        :type client: :class:`gcloud.storage.client.Client` or ``NoneType``</span>
<span class="sd">        :param client: Optional. The client to use.  If not passed, falls back</span>
<span class="sd">                       to the ``client`` stored on the current bucket.</span>

<span class="sd">        :raises: :class:`gcloud.exceptions.NotFound` (if</span>
<span class="sd">                 `on_error` is not passed).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">blob</span> <span class="ow">in</span> <span class="n">blobs</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">blob_name</span> <span class="o">=</span> <span class="n">blob</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">blob_name</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
                    <span class="n">blob_name</span> <span class="o">=</span> <span class="n">blob</span><span class="o">.</span><span class="n">name</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">delete_blob</span><span class="p">(</span><span class="n">blob_name</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">NotFound</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">on_error</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">on_error</span><span class="p">(</span><span class="n">blob</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span></div>

<div class="viewcode-block" id="Bucket.copy_blob"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.copy_blob">[docs]</a>    <span class="k">def</span> <span class="nf">copy_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blob</span><span class="p">,</span> <span class="n">destination_bucket</span><span class="p">,</span> <span class="n">new_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                  <span class="n">client</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Copy the given blob to the given bucket, optionally with a new name.</span>

<span class="sd">        :type blob: :class:`gcloud.storage.blob.Blob`</span>
<span class="sd">        :param blob: The blob to be copied.</span>

<span class="sd">        :type destination_bucket: :class:`gcloud.storage.bucket.Bucket`</span>
<span class="sd">        :param destination_bucket: The bucket into which the blob should be</span>
<span class="sd">                                   copied.</span>

<span class="sd">        :type new_name: string</span>
<span class="sd">        :param new_name: (optional) the new name for the copied file.</span>

<span class="sd">        :type client: :class:`gcloud.storage.client.Client` or ``NoneType``</span>
<span class="sd">        :param client: Optional. The client to use.  If not passed, falls back</span>
<span class="sd">                       to the ``client`` stored on the current bucket.</span>

<span class="sd">        :rtype: :class:`gcloud.storage.blob.Blob`</span>
<span class="sd">        :returns: The new Blob.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_require_client</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">new_name</span> <span class="o">=</span> <span class="n">blob</span><span class="o">.</span><span class="n">name</span>
        <span class="n">new_blob</span> <span class="o">=</span> <span class="n">Blob</span><span class="p">(</span><span class="n">bucket</span><span class="o">=</span><span class="n">destination_bucket</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">new_name</span><span class="p">)</span>
        <span class="n">api_path</span> <span class="o">=</span> <span class="n">blob</span><span class="o">.</span><span class="n">path</span> <span class="o">+</span> <span class="s1">&#39;/copyTo&#39;</span> <span class="o">+</span> <span class="n">new_blob</span><span class="o">.</span><span class="n">path</span>
        <span class="n">copy_result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">api_request</span><span class="p">(</span>
            <span class="n">method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">api_path</span><span class="p">,</span> <span class="n">_target_object</span><span class="o">=</span><span class="n">new_blob</span><span class="p">)</span>
        <span class="n">new_blob</span><span class="o">.</span><span class="n">_set_properties</span><span class="p">(</span><span class="n">copy_result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_blob</span></div>

<div class="viewcode-block" id="Bucket.rename_blob"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.rename_blob">[docs]</a>    <span class="k">def</span> <span class="nf">rename_blob</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blob</span><span class="p">,</span> <span class="n">new_name</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Rename the given blob using copy and delete operations.</span>

<span class="sd">        Effectively, copies blob to the same bucket with a new name, then</span>
<span class="sd">        deletes the blob.</span>

<span class="sd">        .. warning::</span>

<span class="sd">          This method will first duplicate the data and then delete the</span>
<span class="sd">          old blob.  This means that with very large objects renaming</span>
<span class="sd">          could be a very (temporarily) costly or a very slow operation.</span>

<span class="sd">        :type blob: :class:`gcloud.storage.blob.Blob`</span>
<span class="sd">        :param blob: The blob to be renamed.</span>

<span class="sd">        :type new_name: string</span>
<span class="sd">        :param new_name: The new name for this blob.</span>

<span class="sd">        :type client: :class:`gcloud.storage.client.Client` or ``NoneType``</span>
<span class="sd">        :param client: Optional. The client to use.  If not passed, falls back</span>
<span class="sd">                       to the ``client`` stored on the current bucket.</span>

<span class="sd">        :rtype: :class:`Blob`</span>
<span class="sd">        :returns: The newly-renamed blob.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_blob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy_blob</span><span class="p">(</span><span class="n">blob</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">new_name</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span>
        <span class="n">blob</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_blob</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve CORS policies configured for this bucket.</span>

<span class="sd">        See: http://www.w3.org/TR/cors/ and</span>
<span class="sd">             https://cloud.google.com/storage/docs/json_api/v1/buckets</span>

<span class="sd">        :rtype: list of dictionaries</span>
<span class="sd">        :returns: A sequence of mappings describing each CORS policy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">policy</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">policy</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cors&#39;</span><span class="p">,</span> <span class="p">())]</span>

    <span class="nd">@cors.setter</span>
    <span class="k">def</span> <span class="nf">cors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entries</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set CORS policies configured for this bucket.</span>

<span class="sd">        See: http://www.w3.org/TR/cors/ and</span>
<span class="sd">             https://cloud.google.com/storage/docs/json_api/v1/buckets</span>

<span class="sd">        :type entries: list of dictionaries</span>
<span class="sd">        :param entries: A sequence of mappings describing each CORS policy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_patch_property</span><span class="p">(</span><span class="s1">&#39;cors&#39;</span><span class="p">,</span> <span class="n">entries</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">etag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the ETag for the bucket.</span>

<span class="sd">        See: http://tools.ietf.org/html/rfc2616#section-3.11 and</span>
<span class="sd">             https://cloud.google.com/storage/docs/json_api/v1/buckets</span>

<span class="sd">        :rtype: string or ``NoneType``</span>
<span class="sd">        :returns: The bucket etag or ``None`` if the property is not</span>
<span class="sd">                  set locally.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;etag&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the ID for the bucket.</span>

<span class="sd">        See: https://cloud.google.com/storage/docs/json_api/v1/buckets</span>

<span class="sd">        :rtype: string or ``NoneType``</span>
<span class="sd">        :returns: The ID of the bucket or ``None`` if the property is not</span>
<span class="sd">                  set locally.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lifecycle_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Lifecycle rules configured for this bucket.</span>

<span class="sd">        See: https://cloud.google.com/storage/docs/lifecycle and</span>
<span class="sd">             https://cloud.google.com/storage/docs/json_api/v1/buckets</span>

<span class="sd">        :rtype: list(dict)</span>
<span class="sd">        :returns: A sequence of mappings describing each lifecycle rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;lifecycle&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">rule</span><span class="p">)</span> <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rule&#39;</span><span class="p">,</span> <span class="p">())]</span>

    <span class="nd">@lifecycle_rules.setter</span>
    <span class="k">def</span> <span class="nf">lifecycle_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rules</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the lifecycle rules configured for this bucket.</span>

<span class="sd">        See: https://cloud.google.com/storage/docs/lifecycle and</span>
<span class="sd">             https://cloud.google.com/storage/docs/json_api/v1/buckets</span>

<span class="sd">        :rtype: list(dict)</span>
<span class="sd">        :returns: A sequence of mappings describing each lifecycle rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_patch_property</span><span class="p">(</span><span class="s1">&#39;lifecycle&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;rule&#39;</span><span class="p">:</span> <span class="n">rules</span><span class="p">})</span>

    <span class="n">location</span> <span class="o">=</span> <span class="n">_scalar_property</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot;Retrieve location configured for this bucket.</span>

<span class="sd">    See: https://cloud.google.com/storage/docs/json_api/v1/buckets and</span>
<span class="sd">    https://cloud.google.com/storage/docs/concepts-techniques#specifyinglocations</span>

<span class="sd">    If the property is not set locally, returns ``None``.</span>

<span class="sd">    :rtype: string or ``NoneType``</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Bucket.get_logging"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.get_logging">[docs]</a>    <span class="k">def</span> <span class="nf">get_logging</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return info about access logging for this bucket.</span>

<span class="sd">        See: https://cloud.google.com/storage/docs/accesslogs#status</span>

<span class="sd">        :rtype: dict or None</span>
<span class="sd">        :returns: a dict w/ keys, ``logBucket`` and ``logObjectPrefix``</span>
<span class="sd">                  (if logging is enabled), or None (if not).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;logging&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">info</span><span class="p">)</span></div>

<div class="viewcode-block" id="Bucket.enable_logging"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.enable_logging">[docs]</a>    <span class="k">def</span> <span class="nf">enable_logging</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bucket_name</span><span class="p">,</span> <span class="n">object_prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enable access logging for this bucket.</span>

<span class="sd">        See: https://cloud.google.com/storage/docs/accesslogs#delivery</span>

<span class="sd">        :type bucket_name: string</span>
<span class="sd">        :param bucket_name: name of bucket in which to store access logs</span>

<span class="sd">        :type object_prefix: string</span>
<span class="sd">        :param object_prefix: prefix for access log filenames</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;logBucket&#39;</span><span class="p">:</span> <span class="n">bucket_name</span><span class="p">,</span> <span class="s1">&#39;logObjectPrefix&#39;</span><span class="p">:</span> <span class="n">object_prefix</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_patch_property</span><span class="p">(</span><span class="s1">&#39;logging&#39;</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span></div>

<div class="viewcode-block" id="Bucket.disable_logging"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.disable_logging">[docs]</a>    <span class="k">def</span> <span class="nf">disable_logging</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disable access logging for this bucket.</span>

<span class="sd">        See: https://cloud.google.com/storage/docs/accesslogs#disabling</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_patch_property</span><span class="p">(</span><span class="s1">&#39;logging&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">metageneration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the metageneration for the bucket.</span>

<span class="sd">        See: https://cloud.google.com/storage/docs/json_api/v1/buckets</span>

<span class="sd">        :rtype: integer or ``NoneType``</span>
<span class="sd">        :returns: The metageneration of the bucket or ``None`` if the property</span>
<span class="sd">                  is not set locally.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">metageneration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;metageneration&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">metageneration</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">metageneration</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">owner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve info about the owner of the bucket.</span>

<span class="sd">        See: https://cloud.google.com/storage/docs/json_api/v1/buckets</span>

<span class="sd">        :rtype: dict or ``NoneType``</span>
<span class="sd">        :returns: Mapping of owner&#39;s role/ID. If the property is not set</span>
<span class="sd">                  locally, returns ``None``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;owner&#39;</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">project_number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the number of the project to which the bucket is assigned.</span>

<span class="sd">        See: https://cloud.google.com/storage/docs/json_api/v1/buckets</span>

<span class="sd">        :rtype: integer or ``NoneType``</span>
<span class="sd">        :returns: The project number that owns the bucket or ``None`` if the</span>
<span class="sd">                  property is not set locally.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">project_number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;projectNumber&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">project_number</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">project_number</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">self_link</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the URI for the bucket.</span>

<span class="sd">        See: https://cloud.google.com/storage/docs/json_api/v1/buckets</span>

<span class="sd">        :rtype: string or ``NoneType``</span>
<span class="sd">        :returns: The self link for the bucket or ``None`` if the property is</span>
<span class="sd">                  not set locally.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;selfLink&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">storage_class</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the storage class for the bucket.</span>

<span class="sd">        See: https://cloud.google.com/storage/docs/storage-classes</span>
<span class="sd">        https://cloud.google.com/storage/docs/nearline-storage</span>
<span class="sd">        https://cloud.google.com/storage/docs/durable-reduced-availability</span>

<span class="sd">        :rtype: string or ``NoneType``</span>
<span class="sd">        :returns: If set, one of &quot;STANDARD&quot;, &quot;NEARLINE&quot;, or</span>
<span class="sd">                  &quot;DURABLE_REDUCED_AVAILABILITY&quot;, else ``None``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;storageClass&#39;</span><span class="p">)</span>

    <span class="nd">@storage_class.setter</span>
    <span class="k">def</span> <span class="nf">storage_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the storage class for the bucket.</span>

<span class="sd">        See: https://cloud.google.com/storage/docs/storage-classes</span>
<span class="sd">        https://cloud.google.com/storage/docs/nearline-storage</span>
<span class="sd">        https://cloud.google.com/storage/docs/durable-reduced-availability</span>

<span class="sd">        :type value: string</span>
<span class="sd">        :param value: one of &quot;STANDARD&quot;, &quot;NEARLINE&quot;, or</span>
<span class="sd">                      &quot;DURABLE_REDUCED_AVAILABILITY&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_STORAGE_CLASSES</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid storage class: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">,))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_patch_property</span><span class="p">(</span><span class="s1">&#39;storageClass&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">time_created</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the timestamp at which the bucket was created.</span>

<span class="sd">        See: https://cloud.google.com/storage/docs/json_api/v1/buckets</span>

<span class="sd">        :rtype: :class:`datetime.datetime` or ``NoneType``</span>
<span class="sd">        :returns: Datetime object parsed from RFC3339 valid timestamp, or</span>
<span class="sd">                  ``None`` if the property is not set locally.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;timeCreated&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_rfc3339_to_datetime</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">versioning_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Is versioning enabled for this bucket?</span>

<span class="sd">        See:  https://cloud.google.com/storage/docs/object-versioning for</span>
<span class="sd">        details.</span>

<span class="sd">        :rtype: boolean</span>
<span class="sd">        :returns: True if enabled, else False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">versioning</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;versioning&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">return</span> <span class="n">versioning</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;enabled&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

    <span class="nd">@versioning_enabled.setter</span>
    <span class="k">def</span> <span class="nf">versioning_enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enable versioning for this bucket.</span>

<span class="sd">        See:  https://cloud.google.com/storage/docs/object-versioning for</span>
<span class="sd">        details.</span>

<span class="sd">        :type value: convertible to boolean</span>
<span class="sd">        :param value: should versioning be anabled for the bucket?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_patch_property</span><span class="p">(</span><span class="s1">&#39;versioning&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;enabled&#39;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">value</span><span class="p">)})</span>

<div class="viewcode-block" id="Bucket.configure_website"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.configure_website">[docs]</a>    <span class="k">def</span> <span class="nf">configure_website</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">main_page_suffix</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">not_found_page</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Configure website-related properties.</span>

<span class="sd">        See: https://developers.google.com/storage/docs/website-configuration</span>

<span class="sd">        .. note::</span>
<span class="sd">          This (apparently) only works</span>
<span class="sd">          if your bucket name is a domain name</span>
<span class="sd">          (and to do that, you need to get approved somehow...).</span>

<span class="sd">        If you want this bucket to host a website, just provide the name</span>
<span class="sd">        of an index page and a page to use when a blob isn&#39;t found::</span>

<span class="sd">          &gt;&gt;&gt; from gcloud import storage</span>
<span class="sd">          &gt;&gt;&gt; client = storage.Client()</span>
<span class="sd">          &gt;&gt;&gt; bucket = client.get_bucket(bucket_name)</span>
<span class="sd">          &gt;&gt;&gt; bucket.configure_website(&#39;index.html&#39;, &#39;404.html&#39;)</span>

<span class="sd">        You probably should also make the whole bucket public::</span>

<span class="sd">          &gt;&gt;&gt; bucket.make_public(recursive=True, future=True)</span>

<span class="sd">        This says: &quot;Make the bucket public, and all the stuff already in</span>
<span class="sd">        the bucket, and anything else I add to the bucket.  Just make it</span>
<span class="sd">        all public.&quot;</span>

<span class="sd">        :type main_page_suffix: string</span>
<span class="sd">        :param main_page_suffix: The page to use as the main page</span>
<span class="sd">                                 of a directory.</span>
<span class="sd">                                 Typically something like index.html.</span>

<span class="sd">        :type not_found_page: string</span>
<span class="sd">        :param not_found_page: The file to use when a page isn&#39;t found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;mainPageSuffix&#39;</span><span class="p">:</span> <span class="n">main_page_suffix</span><span class="p">,</span>
            <span class="s1">&#39;notFoundPage&#39;</span><span class="p">:</span> <span class="n">not_found_page</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_patch_property</span><span class="p">(</span><span class="s1">&#39;website&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="Bucket.disable_website"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.disable_website">[docs]</a>    <span class="k">def</span> <span class="nf">disable_website</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disable the website configuration for this bucket.</span>

<span class="sd">        This is really just a shortcut for setting the website-related</span>
<span class="sd">        attributes to ``None``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configure_website</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="Bucket.make_public"><a class="viewcode-back" href="../../../storage-buckets.html#gcloud.storage.bucket.Bucket.make_public">[docs]</a>    <span class="k">def</span> <span class="nf">make_public</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">future</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make a bucket public.</span>

<span class="sd">        If ``recursive=True`` and the bucket contains more than 256</span>
<span class="sd">        objects / blobs this will cowardly refuse to make the objects public.</span>
<span class="sd">        This is to prevent extremely long runtime of this method.</span>

<span class="sd">        :type recursive: boolean</span>
<span class="sd">        :param recursive: If True, this will make all blobs inside the bucket</span>
<span class="sd">                          public as well.</span>

<span class="sd">        :type future: boolean</span>
<span class="sd">        :param future: If True, this will make all objects created in the</span>
<span class="sd">                       future public as well.</span>

<span class="sd">        :type client: :class:`gcloud.storage.client.Client` or ``NoneType``</span>
<span class="sd">        :param client: Optional. The client to use.  If not passed, falls back</span>
<span class="sd">                       to the ``client`` stored on the current bucket.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">acl</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">grant_read</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">acl</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">future</span><span class="p">:</span>
            <span class="n">doa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_object_acl</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">doa</span><span class="o">.</span><span class="n">loaded</span><span class="p">:</span>
                <span class="n">doa</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span>
            <span class="n">doa</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">grant_read</span><span class="p">()</span>
            <span class="n">doa</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">recursive</span><span class="p">:</span>
            <span class="n">blobs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_blobs</span><span class="p">(</span>
                <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;full&#39;</span><span class="p">,</span>
                <span class="n">max_results</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_MAX_OBJECTS_FOR_ITERATION</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">blobs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MAX_OBJECTS_FOR_ITERATION</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s1">&#39;Refusing to make public recursively with more than &#39;</span>
                    <span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> objects. If you actually want to make every object &#39;</span>
                    <span class="s1">&#39;in this bucket public, please do it on the objects &#39;</span>
                    <span class="s1">&#39;yourself.&#39;</span>
                <span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_MAX_OBJECTS_FOR_ITERATION</span><span class="p">,)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">blob</span> <span class="ow">in</span> <span class="n">blobs</span><span class="p">:</span>
                <span class="n">blob</span><span class="o">.</span><span class="n">acl</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">grant_read</span><span class="p">()</span>
                <span class="n">blob</span><span class="o">.</span><span class="n">acl</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">)</span></div></div>
</pre></div>

      </section><!-- end of .content -->
      <nav class="side-nav">
        <p class="caption"><span class="caption-text">gcloud</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../gcloud-api.html">Shared Core Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gcloud-auth.html">Authentication</a></li>
</ul>
<p class="caption"><span class="caption-text">Datastore</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../datastore-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../datastore-entities.html">Entities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../datastore-keys.html">Keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../datastore-queries.html">Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../datastore-transactions.html">Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../datastore-batches.html">Batches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../datastore-helpers.html">Helpers</a></li>
</ul>
<p class="caption"><span class="caption-text">Storage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../storage-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../storage-blobs.html">Blobs / Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../storage-buckets.html">Buckets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../storage-acl.html">ACL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../storage-batch.html">Batches</a></li>
</ul>
<p class="caption"><span class="caption-text">Pub/Sub</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../pubsub-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pubsub-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pubsub-topic.html">Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pubsub-subscription.html">Subscriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pubsub-message.html">Message</a></li>
</ul>
<p class="caption"><span class="caption-text">BigQuery</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../bigquery-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bigquery-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bigquery-dataset.html">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bigquery-job.html">Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bigquery-table.html">Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bigquery-query.html">Query</a></li>
</ul>
<p class="caption"><span class="caption-text">Resource Manager</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../resource-manager-api.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resource-manager-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resource-manager-project.html">Projects</a></li>
</ul>
<p class="caption"><span class="caption-text">DNS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../dns-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dns-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dns-zone.html">Managed Zones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dns-resource-record-set.html">Resource Record Sets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dns-changes.html">Change Sets</a></li>
</ul>
<p class="caption"><span class="caption-text">Cloud Search</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../search-usage.html">Using the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../search-client.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../search-index.html">Indexes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../search-document.html">Documents</a></li>
</ul>
<p class="caption"><span class="caption-text">External Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/GoogleCloudPlatform/gcloud-python/">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/GoogleCloudPlatform/gcloud-python/issues">Issues</a></li>
<li class="toctree-l1"><a class="reference external" href="http://stackoverflow.com/questions/tagged/gcloud-python">Stack Overflow</a></li>
<li class="toctree-l1"><a class="reference external" href="https://pypi.python.org/pypi/gcloud">PyPI</a></li>
</ul>

      </nav><!-- end of .side-nav -->
    </article><!-- end of .main -->

    <script src="../../../_static/js/vendor/jquery-1.10.2.min.js"></script>
    <script src="../../../_static/js/plugins.js"></script>
    <script src="../../../_static/js/main.js"></script>
  
  </body>
</html>