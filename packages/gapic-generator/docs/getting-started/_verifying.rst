Verifying the Library
---------------------

Once you have compiled a client library, whether using a Docker image or
a local installation, it is time for the fun part: actually running it!

Create a virtual environment for the library:

.. code-block:: shell

  $ virtualenv ~/.local/client-lib --python=`which python3.7`
  $ source ~/.local/client-lib/bin/activate

Next, install the library:

.. code-block:: shell

  $ cd /dest/
  $ pip install --editable .

Now it is time to play with it!
Here is a test script:

.. code-block:: python

  # This is the client library generated by this plugin.
  from google.cloud import vision

  # Instantiate the client.
  #
  # If you need to manually specify credentials, do so here.
  # More info: https://cloud.google.com/docs/authentication/getting-started
  #
  # If you wish, you can send `transport='grpc'` or `transport='http'`
  # to change which underlying transport layer is being used.
  ia = vision.ImageAnnotator()

  # Send the request to the server and get the response.
  response = ia.batch_annotate_images({
      'requests': [{
          'features': [{
              'type': vision.types.image_annotator.Feature.Type.LABEL_DETECTION,
          }],
          'image': {'source': {
              'image_uri': 'https://s3.amazonaws.com/cdn0.michiganbulb.com'
                           '/images/350/66623.jpg',
          }},
      }],
  })
  print(response)
